<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>低代码智能体框架Coze案例 | Enchanted to Meet U</title><meta name="keywords" content="大模型,Agent"><meta name="author" content="Die Hu"><meta name="copyright" content="Die Hu"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="description" content="低代码Agent框架">
<meta property="og:type" content="article">
<meta property="og:title" content="低代码智能体框架Coze案例">
<meta property="og:url" content="https://enchantedovo.cn/2024/12/05/LLM-Learning9/index.html">
<meta property="og:site_name" content="Enchanted to Meet U">
<meta property="og:description" content="低代码Agent框架">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://s3.bmp.ovh/imgs/2024/04/08/2368e73f30658fe8.png">
<meta property="article:published_time" content="2024-12-05T03:05:00.000Z">
<meta property="article:modified_time" content="2024-12-05T06:03:52.912Z">
<meta property="article:author" content="Die Hu">
<meta property="article:tag" content="大模型">
<meta property="article:tag" content="Agent">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s3.bmp.ovh/imgs/2024/04/08/2368e73f30658fe8.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://enchantedovo.cn/2024/12/05/LLM-Learning9/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#121212","position":"bottom-left"},
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: true
};

var saveToLocal = {
  set: function setWithExpiry(key, value, ttl) {
    const now = new Date()
    const expiryDay = ttl * 86400000
    const item = {
      value: value,
      expiry: now.getTime() + expiryDay,
    }
    localStorage.setItem(key, JSON.stringify(item))
  },

  get: function getWithExpiry(key) {
    const itemStr = localStorage.getItem(key)

    if (!itemStr) {
      return undefined
    }
    const item = JSON.parse(itemStr)
    const now = new Date()

    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key)
      return undefined
    }
    return item.value
  }
}

// https://stackoverflow.com/questions/16839698/jquery-getscript-alternative-in-native-javascript
const getScript = url => new Promise((resolve, reject) => {
  const script = document.createElement('script')
  script.src = url
  script.async = true
  script.onerror = reject
  script.onload = script.onreadystatechange = function() {
    const loadState = this.readyState
    if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
    script.onload = script.onreadystatechange = null
    resolve()
  }
  document.head.appendChild(script)
})</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-12-05 14:03:52'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(function () {  window.activateDarkMode = function () {
    document.documentElement.setAttribute('data-theme', 'dark')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
    }
  }
  window.activateLightMode = function () {
    document.documentElement.setAttribute('data-theme', 'light')
   if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
    }
  }
  const autoChangeMode = 'false'
  const t = saveToLocal.get('theme')
  if (autoChangeMode === '1') {
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
    const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
    const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
    const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified
    if (t === undefined) {
      if (isLightMode) activateLightMode()
      else if (isDarkMode) activateDarkMode()
      else if (isNotSpecified || hasNoSupport) {
        const now = new Date()
        const hour = now.getHours()
        const isNight = hour <= 6 || hour >= 18
        isNight ? activateDarkMode() : activateLightMode()
      }
      window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
        if (saveToLocal.get('theme') === undefined) {
          e.matches ? activateDarkMode() : activateLightMode()
        }
      })
    } else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else if (autoChangeMode === '2') {
    const now = new Date()
    const hour = now.getHours()
    const isNight = hour <= 6 || hour >= 18
    if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
    else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else {
    if (t === 'dark') activateDarkMode()
    else if (t === 'light') activateLightMode()
  }const asideStatus = saveToLocal.get('aside-status')
if (asideStatus !== undefined) {
   if (asideStatus === 'hide') {
     document.documentElement.classList.add('hide-aside')
   } else {
     document.documentElement.classList.remove('hide-aside')
   }
}const fontSizeVal = saveToLocal.get('global-font-size')
if (fontSizeVal !== undefined) {
  document.documentElement.style.setProperty('--global-font-size', fontSizeVal + 'px')
}})()</script><link rel="stylesheet" href="/css/diy.css"><meta name="generator" content="Hexo 5.3.0"><link rel="alternate" href="/atom.xml" title="Enchanted to Meet U" type="application/atom+xml">
<link href="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.css" rel="stylesheet" /></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" data-lazy-src="/img/ava.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">36</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">32</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">21</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://s3.bmp.ovh/imgs/2024/04/08/2368e73f30658fe8.png)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Enchanted to Meet U</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">低代码智能体框架Coze案例</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-12-05T03:05:00.000Z" title="发表于 2024-12-05 11:05:00">2024-12-05</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-12-05T06:03:52.912Z" title="更新于 2024-12-05 14:03:52">2024-12-05</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%A4%A7%E6%A8%A1%E5%9E%8B/">大模型</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%A4%A7%E6%A8%A1%E5%9E%8B/Agent/">Agent</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">8.2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>26分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><!--  -->
<!-- <img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="p1.png"  style="zoom:55%;" /> -->
<h1 id="引言">引言​</h1>
<p>AI 行业的终极目标是实现 AGI（通用人工智能），期望仅凭简单指令就能用媲美或超越人类的智力执行任何任务。然而，当前的大模型在处理多步骤复杂任务时仍存在明显局限。​<br>
​<br>
以“数据分析图表、剧情游戏”或“本文结构化外文精读”等需要多个子步骤协调完成的任务为例，即便是最先进的 ChatGPT-4o 和 Claude 3.5 sonnet，仅依靠单一 Prompt 指令也难以实现稳定执行。​<br>
现阶段的 AI Agent 更像缺乏独立解决问题能力的职场新人，需要遵循 mentor 的指引，按照给定的 SOP 流程才能完成特定任务。​<br>
​<br>
本文将介绍如何将一个复杂任务从需求雏形逐步落地，构筑为一个 AI Agent，为你后续手捏 Agent 提供思路指引。​<br>
​</p>
<h1 id="step-0：梳理手捏-ai-agent-的思路">Step 0：梳理手捏  AI Agent 的思路​</h1>
<p>我们知道 Prompt 工程的必备能力：<strong>通过逻辑思考，从知识经验（KnowHow）中抽象表达出关键方法与要求</strong>。这一理念同样适用在 Coze 中创建 AI Agent 。​</p>
<p>本文主要讨论工作流驱动的 Agent，搭建工作流驱动的 Agent ，简单情况可分为 3 个步骤：</p>
<ol>
<li>规划：制定任务的关键方法​
<ul>
<li>总结任务目标与执行形式​</li>
<li>将任务分解为可管理的子任务，确立逻辑顺序和依赖关系​</li>
<li>设计每个子任务的执行方法​</li>
</ul>
</li>
<li>实施：分步构建和测试 Agent 功能​
<ul>
<li>在 Coze 上搭建工作流框架，设定每个节点的逻辑关系​</li>
<li>详细配置子任务节点，并验证每个子任务的可用性​</li>
</ul>
</li>
<li>完善：全面评估并优化 Agent 效果​
<ul>
<li>整体试运行 Agent，识别功能和性能的卡点​</li>
<li>通过反复测试和迭代，优化至达到预期水平​<br>
​</li>
</ul>
</li>
</ol>
<p>接下来，我们从制定关键方法与流程，梳理「结构化外文精读专家」Agent 的任务目标。</p>
<h1 id="step-1：制定任务的关键方法">Step 1：制定任务的关键方法​</h1>
<h2 id="总结任务目标与执行形式">总结任务目标与执行形式​</h2>
<p>在开始设计和开发任何 AI Agent 之前，最关键的第一步是明确定义你期望 AI 最终输出的结果。这包括：​</p>
<ol>
<li>详细描述期望获得的输出内容​<br>
a. 是文本、图像、音频还是其他形式的数据？​<br>
b. 输出的具体格式和结构是什么？​<br>
c. 确定输出内容的质量标准​</li>
<li>预估任务的可行性​</li>
<li>确定任务的执行形式​<br>
​</li>
</ol>
<p>基于 LearnAndRecord 的框架，假设我是 CET-4 英语学习者，对架构进行了微调后，优化后的精读结构如下：</p>
<figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 中文标题</span></span><br><span class="line"></span><br><span class="line"><span class="quote">&gt; 中文导语 // 根据全文表达的主要内容，用中文输出能够引起读者注意力的摘要导语</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 阅读理解小作业 // 基于全文内容，精心策划 3 道符合 CET-4 难度的阅读理解题目，每道题均提供 A、B、C、D 四个选项，题目和选项均以英文呈现</span></span><br><span class="line"></span><br><span class="line">1）[题目问题]</span><br><span class="line">A. [选项A]</span><br><span class="line">B. [选项B]</span><br><span class="line">C. [选项C]</span><br><span class="line">D. [选项D]</span><br><span class="line"></span><br><span class="line"><span class="section">## 阅读导图 // 根据全文完整内容，生成结构化的英文要点大纲，并用思维导图的形式表达</span></span><br><span class="line"></span><br><span class="line"><span class="section">### 英文音频 // 依据英文原文，运用 TTS 技术生成阅读音频</span></span><br><span class="line"></span><br><span class="line"><span class="section">### 英文标题</span></span><br><span class="line"></span><br><span class="line"><span class="section">### 英文原文</span></span><br><span class="line"></span><br><span class="line"><span class="section">### 全文对照精读 // 针对全文内容，分段输出每段英文原文+对应段落中文翻译+对应段落中符合 CET-4 难度及以上的所有词汇释义，具体格式如下：</span></span><br><span class="line"></span><br><span class="line">【一段英文原文】</span><br><span class="line">【一段中文翻译】</span><br><span class="line"><span class="bullet">-</span> 【原词汇 1】</span><br><span class="line"><span class="bullet">    -</span> 音标：【给出对应的音标】</span><br><span class="line"><span class="bullet">    -</span> 中文释义：【中文释义】</span><br><span class="line"><span class="bullet">    -</span> 英文例句：【英文例句】</span><br><span class="line"><span class="bullet">    -</span> 例句翻译：【例句翻译】</span><br><span class="line"></span><br><span class="line"><span class="section">### 待学词汇盘点</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> 待学词汇：音标 中文释义</span><br><span class="line"><span class="bullet">-</span> 待学词汇：音标 中文释义</span><br><span class="line"></span><br><span class="line"><span class="section">## 参考答案 // 给出阅读理解作业中 3 道题目的准确答案</span></span><br></pre></td></tr></table></figure>
<h2 id="分解子任务-确立逻辑顺序和依赖关系">分解子任务，确立逻辑顺序和依赖关系​</h2>
<p>从精读结构来看，整个模板是由多个子模块共同组成的。由于每个模块的格式、用途不尽相同，即可理解为一一项不同的子任务。​</p>
<p>对于 LLM-based 的 AI Agent 工程而言，在一轮对话中一次性执行多种子任务，非常考验作为大脑的 LLM 大模型的智力水平。（即便是最先进的 ChatGPT-4o 和 Claude 3.5 sonnet，仅依靠单一 Prompt 指令也难以稳定执行需要多个子步骤协调完成的任务）​<br>
​<br>
在实操过程中，其实是先写了单段 Prompt，在 Claude 和 ChatGPT 中对文本生成部分进行了简单测试，生成内容基本能达到预期，但输出格式的稳定性欠佳。​<br>
拓展阅读：如何判断自己的任务/Prompt 是否需要拆解为工作流？——答案见文末「常见问题」​<br>
​<br>
于是，将任务分解为可管理的子任务，确立逻辑顺序和依赖关系如下：</p>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2024/12/05/LLM-Learning9/1.png" style="zoom:60%;">
<p>每个子任务分布执行，成果完全独立。接下来就是设计每个子任务的执行方法（要求）。​<br>
​</p>
<h2 id="设计每个子任务的执行方法">设计每个子任务的执行方法​</h2>
<p>根据项目实际需求，详细规划每个内容模块的输出要求。​<br>
在规划过程中，可以想象自己正在面对面教一位新人工作，这样有助于更清晰地制定任务指南。​<br>
​<br>
本案例中， 子任务的各个内容模块，详细要求如下：<br>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2024/12/05/LLM-Learning9/2.png"><br>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2024/12/05/LLM-Learning9/3.png"><br>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2024/12/05/LLM-Learning9/4.png"></p>
<h1 id="step-2：分步构建和测试-agent-功能">Step 2：分步构建和测试 Agent 功能​</h1>
<h2 id="在-coze-上搭建工作流框架-设定每个节点的逻辑关系">在 Coze 上搭建工作流框架，设定每个节点的逻辑关系​</h2>
<p>首先进入 Coze，点击「个人空间-工作流-创建工作流」，打开创建工作流的弹窗。</p>
<p>根据弹窗要求，自定义工作流信息。​点击确认后完成工作流的新建，可以看到整个编辑视图与功能。<br>
​<br>
其中，左侧「选择节点」模块中，根据我们的子任务需要，实际用上的有：​</p>
<ol>
<li>插件：提供一系列能力工具，拓展  Agent 的能力边界。本案例涉及的思维导图、英文音频，因为无法通过 LLM 生成，就需要依赖插件来实现。​</li>
<li>大模型：调用 LLM，实现各项文本内容的生成。本案例的中文翻译、英文大纲、单词注释等都依赖大模型节点。​</li>
<li>代码：支持编写简单的 Python、 JS 脚本，对数据进行处理。​<br>
而编辑面板中的开始节点、结束节点，则分别对应 1.2 分解子任务 流程图中的原文输入和结果输出环节。​<br>
​<br>
接下来，按照流程图，在编辑面板中拖入对应的 LLM 大模型、插件、代码节点，即可完成工作流框架的搭建。</li>
</ol>
<blockquote>
<p>附 1：关于「分段」、「拼合」代码节点设计的补充解释​：<br>
实际测试表明，由于 LLM 的上下文长度有限，通常情况下，一次性输入输出的文本越长，生成时间越长，结果稳定性越低。特别是当对生成结果的格式要求较高时，这个问题更为突出。​<br>
考虑到对照精读环节，本身就是逐段生成的，非常适合批处理的形式。所以需要用「分段输入正文」，把正文分割后，用 LLM 节点批处理每一段的对照精读，最终「拼合精读结果」，就能输出完整的文本结果。​</p>
<blockquote>
<p>Tips：如果觉得编写代码脚本繁琐，且仅进行文本处理，也可以考虑使用 LLM 节点，配合适当的 prompt 来临时验证整个工作流。​</p>
</blockquote>
</blockquote>
<blockquote>
<p>附 2：如何在插件中心，确定需要的插件？​<br>
先用关键词进行尝试性搜索，根据插件名称、插件介绍页、描述、参数、示例，判断是否可能满足需求。有多个插件同时可选时，一般优选官方/高收藏/高成功率的插件，提升使用效果。如果实际试用效果不行，则换用其他插件，或自己编写上架插件。​</p>
<p>本文插件的搜索过程：​</p>
<ol>
<li>TTS 文字转语音插件：搜索“语音”、“文字转语音”、“TTS”等相关关键词，看到“英文文本转语音”插件，阅读描述后，应该和我们需求相符，遂添加。​</li>
<li>思维导图插件：搜索“脑图”、“树图”、“导图”、“mindmap”等关键词，看到“TreeMind 树图”插件，阅读描述后，应该和我们需求相符，遂添加。</li>
</ol>
</blockquote>
<h2 id="详细配置子任务节点-并验证每个子任务的可用性">详细配置子任务节点，并验证每个子任务的可用性​</h2>
<p>在确定工作流框架后，即可按照流程步骤，<strong>逐个完成子任务节点的详细配置</strong>。​我将快速介绍每个节点的必要配置技巧，并完全开源每个节点的 prompt、代码、I/O 信息，以供参照学习。​</p>
<p><strong>0.开始节点​</strong></p>
<p>想象一下，工作流就像一条生产线。​<br>
开始节点就是这条生产线的入口，它的工作是定义启动工作流需要的输入参数，收集需要的原材料（也就是用户的输入）。在这里，可以给每种&quot;原材料&quot;取个名字（这就是变量名），还能说明每种&quot;原材料&quot;是什么类型的，以便后续的分类识别与加工。​<br>
​<br>
<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2024/12/05/LLM-Learning9/5.png"><br>
​<br>
其中，<code>BOT_USER_INPUT</code>是默认变量，用来接收用户在外层 Bot 中的输入文本。工作流模式下的工作流，应只保留 BOT_USER_INPUT 节点。​</p>
<p>在本案例中，我们不需要在开始节点配置额外变量。用户初始输入的英文原文，将通过<code>BOT_USER_INPUT</code>直接传入工作流，启动后续环节。​</p>
<p>所以，删掉那条空变量，我们这步就算完成了。​<br>
​</p>
<h3 id="标题-导语-大纲-含大模型节点的配置思路">标题、导语、大纲（含大模型节点的配置思路）​</h3>
<p><strong>配置环节​</strong><br>
在生成标题、导语、大纲时，因为只涉及文本理解与文本创作，很明显这是 LLM 节点的工作，所以我们需要对 LLM 节点进行配置。​<br>
​<br>
可能你在 1.2 分解子任务 那个章节就想问：为什么不把“标题、导语、大纲”拆得更细，比如分成生成标题、生成导语和生成大纲 3 个子任务？​</p>
<p>——因为 LLM 是按输入/输出的字符数量来消耗 token，在满足预期的情况下，更少的大模型处理环节，能有效减少 token 消耗，在实际投产时节省模型调度费用。​<br>
经过实测，豆包·function call 32k 模型，已经能在一轮对话中稳定地生成这三项内容了。​<br>
​<br>
每个大模型节点的配置项很丰富，对于入门用户来说，<mark>主要关注</mark>：</p>
<figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 处理形式</span></span><br><span class="line">单次/批处理</span><br><span class="line"></span><br><span class="line"><span class="section"># 模型</span></span><br><span class="line">可以选择该节点执行任务时调用的大模型，比如选豆包，就是豆包来处理回复。</span><br><span class="line"></span><br><span class="line"><span class="section"># 输入</span></span><br><span class="line">用于设置输入到该模型节点的字段信息，信息只能来自串联连接的前置节点。</span><br><span class="line"></span><br><span class="line"><span class="section"># 提示词</span></span><br><span class="line">分为“用户提示词”和“人设与回复逻辑”</span><br><span class="line"></span><br><span class="line">如果子任务不复杂，只设置“用户提示词”足够了。</span><br><span class="line"></span><br><span class="line"><span class="section"># 输出</span></span><br><span class="line">用于设置该模型节点输出的字段信息，可以选择文本、Markdown、json 三种格式。</span><br><span class="line"></span><br><span class="line">一般选择 json 即可（因为 json 格式下也可以输出纯文本/带 Markdown 标记的纯文本，而且能一次性能结构化的输出不同字段信息）</span><br></pre></td></tr></table></figure>
<p>在“标题、导语、大纲”节点中，我们希望 LLM 能够从开始节点，接收到原文信息，经过处理后，一次性把我们需要的中文标题、中文导语、英文标题、英文阅读大纲生成输出。<br>
​<br>
另外，为了保证大模型能够处理足够长的内容，需要视实际情况调大模型的最大回复长度。<br>
​<br>
最后，根据 <strong>1.3 设计每个子任务的执行方法</strong> 中的内容模块要求，设计并填入以下用户提示词：</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">## 功能</span></span><br><span class="line">基于&#123;&#123;input&#125;&#125;的英文文章，生成对应的中文标题、中文导语、英文标题、阅读大纲</span><br><span class="line"> </span><br><span class="line"><span class="section">## 要求</span></span><br><span class="line">严格遵循以下要求：</span><br><span class="line"> </span><br><span class="line"><span class="section">### 中文标题</span></span><br><span class="line">根据全文大意，翻译英文标题，输出 20 字以内的中文标题。</span><br><span class="line"> </span><br><span class="line"><span class="section">### 中文导语</span></span><br><span class="line">根据全文表达的主要内容，用中文输出能够引起读者注意力的摘要导语。要求简洁明了，限制在 1-3 句话内。</span><br><span class="line"> </span><br><span class="line"><span class="section">### 英文标题</span></span><br><span class="line">如实输出原文的英文标题，不需要任何修改</span><br><span class="line"> </span><br><span class="line"><span class="section">### 阅读大纲</span></span><br><span class="line"><span class="bullet">1.</span> 根据全文完整内容，选择最适合的大纲结构，生成结构化的内容大纲，简洁的表达全文核心内容。要求：全英文，不超过200词。</span><br><span class="line"><span class="bullet">2.</span> 在输出的阅读大纲的开头增加这句话：“Directly use the following outline to generate the corresponding mind map in English.”</span><br><span class="line"><span class="bullet">3.</span> 大纲参考格式如下，不要输出[]符号：</span><br><span class="line"> </span><br><span class="line"><span class="bullet">-</span> [Article Title]</span><br><span class="line"><span class="bullet">    -</span> [Key Point 1]</span><br><span class="line"><span class="bullet">        -</span> [Subpoint 1.1]</span><br><span class="line"><span class="bullet">        -</span> [Subpoint 1.2]</span><br><span class="line"><span class="bullet">    -</span> [Key Point 2]</span><br><span class="line"><span class="bullet">        -</span> [Subpoint 2.1]</span><br><span class="line"><span class="bullet">        -</span> [Subpoint 2.2]</span><br><span class="line"> </span><br><span class="line"><span class="section">## 输出格式</span></span><br><span class="line"><span class="bullet">1.</span> 以 string 格式，输出中文标题到 变量&#123;&#123;cnTitle&#125;&#125;</span><br><span class="line"><span class="bullet">2.</span> 以 string 格式，输出中文导语到 变量&#123;&#123;cnSummary&#125;&#125;</span><br><span class="line"><span class="bullet">3.</span> 以 string 格式，输出英文标题到 变量&#123;&#123;enTitle&#125;&#125;</span><br><span class="line"><span class="bullet">4.</span> 以 string 格式，输出阅读大纲到 变量&#123;&#123;enTreeMind&#125;&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>附：大模型节点配置的入门要点​</strong></p>
<p>大模型节点的配置，有几个入门要点，希望能帮助你更好入门、更少踩坑：​</p>
<ol>
<li>输入与输出的变量名称是自定义的，只需要按照自己的习惯设定，方便识别字段的含义即可。​</li>
<li>输入：因为我们取得是开始节点中，用户输入的<code>&#123;&#123;BOT_USER_INPUT&#125;&#125;</code>，所以可以直接选择引用即可​。</li>
<li>在提示词区域中，因为需要 LLM 根据输入的信息进行处理，所以需要两个双花括号，写明需要使用的输入项参数名，如<code>&#123;&#123;input&#125;&#125;</code>​</li>
<li>输出：有几项子内容需要生成，就设置几项：​
<ul>
<li>a. 为了能够让大模型理解最终输出的形式要求，需要在用户提示词最后，添加 ## 输出格式 段落，描述每个变量名称、输出内容、输出格式。​</li>
<li>b. 请务必注意，变量名称、对应的输出内容、输出格式一定要前后完全一致，不然就会输出失败！这一点非常容易踩坑​</li>
</ul>
</li>
<li>关于模型选择：​
<ul>
<li>a. 没有强制必须用某个模型的说法。而是根据自己的习惯、实测的响应速度、生成质量、调用费用，进行综合选择。比如 Doubao Function Call 模型，对于插件调用、Coze 内 json 格式输出比较擅长；MiniMax 处理文字速度很快；GLM 对于用户提示词的理解比较好。每个模型都有自己擅长的特点，而且每家模型都在不断的迭代。所以模型的选用，需要根据实测情况综合调整。​</li>
<li>b. 一般选择豆包·function call 32k。“function call”代表有着更好的 Coze 的工具调用能力，“32k”代表模型的上下文窗口大小，即模型在处理文本时能够考虑的单词或标记的数量。如果输出和输入的类型不是纯文本时，比如是 array 、object 结构，请根据实测情况，考虑替换上豆包 function call 版本，其他的 LLM 可能会输出格式比较混乱。</li>
</ul>
</li>
</ol>
</blockquote>
<h3 id="阅读导图-含插件节点的配置思路">阅读导图（含插件节点的配置思路）​</h3>
<p>在上一步中，我们已经生成了英文阅读大纲<code>&#123;&#123;enTreeMind&#125;&#125;</code>，接下来就是用<code>&lt;generateTreeMind&gt;</code>插件节点，接收思维导图的原材料文本，自动生成我们所需的思维导图。​</p>
<p>1）确定处理方式：由于我们一次精读任务，仅需生成一张思维导图，所以处理方式选择“单次”。​</p>
<p>2）确定输入：​<br>
在输入区，该插件仅需设置<code>&#123;&#123;query_text&#125;&#125;</code>变量，格式是 string 字符串。​<br>
所以只需要引用“标题、导语、大纲”节点的<code>&#123;&#123;enTreeMind&#125;&#125;</code>变量即可。​</p>
<p>3）确定输出：​<br>
观察输出区，能看到有很多的输出字段。为了确定插件生成的导图的对应字段，可以根据字段名称、「查看示例」中的示例说明，或者试运行后定位所需的字段。​<br>
我们所需的是图片格式的思维导图，所以确定<code>pic</code>就是需要的输出。<br>
​<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2024/12/05/LLM-Learning9/6.png"><br>
至此，第一个子任务流程分支已集齐了预期的输出字段：​</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">中文标题：&#123;&#123;cnTitle&#125;&#125;​</span><br><span class="line">中文导语：&#123;&#123;cnSummary&#125;&#125;​</span><br><span class="line">英文标题：&#123;&#123;enTitle&#125;&#125;​</span><br><span class="line">阅读导图：&#123;&#123;enTreeMind&#125;&#125; -&gt; &#123;&#123;pic&#125;&#125;​</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>附：为什么能提前在前一个节点确认思维导图的所需输入格式？​</strong></p>
<p>如果插件上架的时候，说明写的比较规范，可以看插件的示例说明。这个插件说的是 AI 思维导图软件，但是请求体写的很简单，其实没法确定如何稳定生成预期结果。​</p>
<p>但既然是 AI 思维导图软件，所以猜测通过类似 prompt 的指令就能控制输出结果。所以尝试沿用大部分思维导图软件在转换为大纲时的常见格式，方便大模型理解。​</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">直接使用以下英文大纲，用英文生成对应思维导图​</span><br><span class="line"><span class="bullet">-</span> [英文标题]​</span><br><span class="line"><span class="bullet">    -</span> [要点 1]​</span><br><span class="line"><span class="bullet">        -</span> [子要点 1.1]​</span><br><span class="line"><span class="bullet">        -</span> [子要点 1.2]​</span><br></pre></td></tr></table></figure>
<p>实际单节点测试下来，输出结构确实是 ok 的。<br>
​<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2024/12/05/LLM-Learning9/6.png"></p>
</blockquote>
<h3 id="阅读理解小作业">阅读理解小作业​</h3>
<p>在这个分支流程，目标是根据全文信息，生成 3 道符合 CET-4 难度的阅读理解题目，并根据题目和原文，输出参考答案。​<br>
故同样在输入中引入<code>&#123;&#123;BOT_USER_INPUT&#125;&#125;</code>，并设置输出变量<code>&#123;&#123;question&#125;&#125;</code>。用户提示词：​</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">## 功能</span></span><br><span class="line">基于&#123;&#123;input&#125;&#125;的英文文章，精心策划3道符合CET-4难度的阅读理解题目。每道题均提供A、B、C、D四个选项，正确答案所在选项顺序随机，题目和选项均以英文呈现。</span><br><span class="line"> </span><br><span class="line"><span class="section">## 阅读理解题目</span></span><br><span class="line"><span class="section">## 格式</span></span><br><span class="line">每个题目必须包含以下元素，严格遵守格式如下：</span><br><span class="line"> </span><br><span class="line">1）[题目问题]</span><br><span class="line">A. [选项A]</span><br><span class="line">B. [选项B]</span><br><span class="line">C. [选项C]</span><br><span class="line">D. [选项D]</span><br><span class="line"> </span><br><span class="line"><span class="section">### 正向示例</span></span><br><span class="line">以下符合阅读理解题目的模板要求，输出的一个正向示例：</span><br><span class="line"> </span><br><span class="line"><span class="bullet">1.</span> What was the main reason for Biden&#x27;s decision to abandon his re-election bid?</span><br><span class="line"><span class="code">    A. His health concerns</span></span><br><span class="line"><span class="code">    B. Pressure from his allies</span></span><br><span class="line"><span class="code">    C. Concerns about his age and ability to defeat Trump</span></span><br><span class="line"><span class="code">    D. His desire to focus on his current presidential duties</span></span><br><span class="line"><span class="code"> </span></span><br><span class="line"><span class="code">## 注意事项</span></span><br><span class="line"><span class="code">1. 题目序号必须使用中文括号，如1）、2）、3）</span></span><br><span class="line"><span class="code">2. 严格遵守以上格式，不要添加任何额外的文字或解释</span></span><br><span class="line"><span class="code">3. 请你在输出结果时，检查输出的格式，确保输出符合格式要求</span></span><br></pre></td></tr></table></figure>
<h3 id="参考答案">参考答案​</h3>
<p>此处需要输入根据题目和原文，输出参考答案。（ ps：每个节点的输入信息，都是要单独引用的，不可省略）​。用户提示词如下：​</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">## 功能</span></span><br><span class="line">理解&#123;&#123;input&#125;&#125;的英文文章内容，针对&#123;&#123;question&#125;&#125;的 3 道题目，生成题目答案。</span><br><span class="line"> </span><br><span class="line"><span class="section">## 题目答案</span></span><br><span class="line"><span class="section">### 格式</span></span><br><span class="line">每个答案必须包含以下元素，严格遵守格式如下：</span><br><span class="line"> </span><br><span class="line">1）[题目问题]</span><br><span class="line">答案：[X] [正确选项内容]</span><br><span class="line"> </span><br><span class="line">2）[题目问题]</span><br><span class="line">答案：[X] [正确选项内容]</span><br><span class="line"> </span><br><span class="line">3）[题目问题]</span><br><span class="line">答案：[X] [正确选项内容]</span><br><span class="line"> </span><br><span class="line"><span class="section">### 正向示例</span></span><br><span class="line">以下符合题目答案的模板要求，输出的一个正向示例：</span><br><span class="line"> </span><br><span class="line"><span class="bullet">1.</span> What was the main reason for Biden&#x27;s decision to abandon his re-election bid?</span><br><span class="line">答案：C. Concerns about his age and ability to defeat Trump</span><br><span class="line"> </span><br><span class="line"><span class="section">## 注意事项</span></span><br><span class="line"><span class="bullet">1.</span> 题目序号必须使用中文括号，如1）、2）、3）</span><br><span class="line"><span class="bullet">2.</span> 必须重复完整的题目问题中的问句（不用输出题目选项）</span><br><span class="line"><span class="bullet">3.</span> 正确答案用方括号[X]表示，X为正确选项的字母</span><br><span class="line"><span class="bullet">4.</span> 严格遵守以上格式，不要添加任何额外的文字或解释</span><br><span class="line"><span class="bullet">5.</span> 请你在输出结果时，检查输出的格式，确保输出符合格式要求</span><br><span class="line"><span class="bullet">6.</span> 再三检查你回答的答案，确保正确</span><br></pre></td></tr></table></figure>
<h3 id="英文音频">英文音频​</h3>
<p>音频生成很简单，直接把原文输入到<code>英文音频生成</code>插件​。打开试运行结果里的 url，跳转后确实就是一段 mp3 音频，成功～</p>
<h3 id="分段输入正文">分段输入正文</h3>
<blockquote>
<p>（含使用 Coze 自动生成代码脚本的技巧，非技术同学必看）​<br>
​<br>
考虑到对照精读环节，本身就是逐段生成的，非常适合批处理的形式。​<br>
所以需要用「分段输入正文」，把正文分割后，用 LLM 节点批处理每一段的对照精读，最终「拼合精读结果」，就能输出完整的文本结果。​<br>
​<br>
用户输入的原文，格式一般是：​</p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">原文标题    // 需要去掉</span><br><span class="line">原文段落 1  // 分段输出</span><br><span class="line">原文段落 2  // 分段输出</span><br><span class="line">……</span><br></pre></td></tr></table></figure>
<p>为了确保正确区分标题句和段落内容，我这边用了一个简易的方法——直接在 AI 对话窗口中，通过开场白提示用户按格式输入文章，用#符直接标记标题句。<br>
​<br>
然后用 Python 脚本，去掉标题句，并把剩下内容按照段落的换行，逐段输出为 Array<String>格式：​</String></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">main</span>(<span class="params">args: Args</span>) -&gt; Output:</span></span><br><span class="line">    <span class="built_in">input</span> = args.params[<span class="string">&#x27;input&#x27;</span>]</span><br><span class="line">    <span class="comment"># 使用正则表达式去除标题整行</span></span><br><span class="line">    cleaned_input = re.sub(<span class="string">r&#x27;^#+.*$&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="built_in">input</span>, flags=re.MULTILINE)</span><br><span class="line">    <span class="comment"># 将剩余的段落分割成数组，去除空白行，并去除每个段落的前后空格</span></span><br><span class="line">    output = [line.strip() <span class="keyword">for</span> line <span class="keyword">in</span> cleaned_input.splitlines() <span class="keyword">if</span> line.strip()]</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&#x27;output&#x27;</span>: output&#125;</span><br></pre></td></tr></table></figure>
<p>试运行后，就可以发现，节点已按照预期运作，分次输出了每一段原文。​</p>
<blockquote>
<p><strong>附 1：如何用 Coze 自动生成代码节点的代码？</strong><br>
这段代码也是用 Coze 代码节点自带 IDE 里的 AI 功能生成的，使用技巧如下（我试了很多次，请务必参考图中的小技巧，不然大概率失败）：​<br>
​​<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2024/12/05/LLM-Learning9/6.png"><br>
代码生成后，除了直接在节点的试运行功能测试外，也可用「测试代码」功能，进行测试：​<br>
​<br>
<strong>附 2：能不能不写代码，快速实现这个子任务？​</strong><br>
可以，因为是纯文本处理工作，所以只要有合适的 prompt 也可以用 LLM 节点实现，只不过在 token 消耗、响应速度上不如代码节点。在快速搭建工作流的开发阶段，不会代码的话，可以考虑用 LLM 节点。​<br>
但工作流走通后，<strong>强烈需要用代码节点替代回来，提升工作流效率、降低成本</strong>。（同样的功能，LLM 节点运行了 22s，代码节点只需要 0.1s）</p>
</blockquote>
<h3 id="全文对照精读-含批处理的输入输出设置技巧">全文对照精读（含批处理的输入输出设置技巧）​</h3>
<p>拿到分段的原文段落后，就是生成我们整个任务中最精华部分——带注释的全文对照精读！​<br>
此处我们选择的是用大模型节点，批处理每一段的原文。批处理的好处很多，现在 Coze 的一个大模型节点，能够同时并行 10 项任务，极大加速内容的生成。且因为每一段都是单独处理，所以输出长度显著降低，提升了稳定性。​<br>
​<br>
这里请务必注意批处理、输入的选择！！！​</p>
<ol>
<li>批处理区域，引用上个节点的 output 数组，批处理会按顺序逐个输出数组中的每一段原文。​</li>
<li>输入区域，选择批处理区域中需要被取用的参数。（千万不要引用上个节点的 output 数组……我一开始设置错了，导致一直生成失败，还找不到错误原因）​<br>
​</li>
</ol>
<p>随后，根据 1.3 设计每个子任务的执行方法 中的全文对照精读的输出要求，设计用户提示词如下:</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">## 功能</span></span><br><span class="line">基于&#123;&#123;input&#125;&#125;，完成中文翻译，原文中符合CET-4难度词汇，为&quot;待学词汇&quot;。</span><br><span class="line">输出精读结果</span><br><span class="line"></span><br><span class="line"><span class="section">## 精读结果</span></span><br><span class="line">请根据以下模板输出：</span><br><span class="line"></span><br><span class="line">英文原文</span><br><span class="line"></span><br><span class="line">中文翻译</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> 待学词汇</span><br><span class="line"><span class="bullet">    -</span> 音标：音标</span><br><span class="line"><span class="bullet">    -</span> 中文释义：中文释义</span><br><span class="line"><span class="bullet">    -</span> 英文例句：生成一句包含本条待学词汇的英文例句</span><br><span class="line"><span class="bullet">    -</span> 例句翻译：用中文翻译英文例句</span><br><span class="line"></span><br><span class="line"><span class="section">## 正向示例</span></span><br><span class="line">以下符合精读结果的模板要求，输出的一个正向格式示例：</span><br><span class="line"></span><br><span class="line">President Biden, 81, abandoned his bid for re-election on Sunday as he caved to relentless pressure from his closest allies to drop out of the race amid deep concerns that he was too old and frail to defeat former President Donald J. Trump. Vice President Kamala Harris said she would seek the nomination in his place, and many Democrats quickly lined up behind her after Mr. Biden gave her his endorsement.</span><br><span class="line"></span><br><span class="line">81岁的拜登总统在周日宣布放弃连任竞选。这一决定是在他最亲密的盟友持续施压下做出的，因为人们普遍担心他年事已高，体力不支，无法击败前总统唐纳德·J·特朗普。副总统卡玛拉·哈里斯表示，她将取而代之寻求党内提名。在拜登表态支持后，许多民主党人迅速站到了哈里斯一边。</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> abandoned</span><br><span class="line"><span class="bullet">    -</span> 音标：/əˈbændənd/</span><br><span class="line"><span class="bullet">    -</span> 中文释义：放弃，抛弃</span><br><span class="line"><span class="bullet">    -</span> 英文例句：The team abandoned their original plan due to unforeseen circumstances.</span><br><span class="line"><span class="bullet">    -</span> 例句翻译：由于突发情况，团队放弃了原定计划。</span><br><span class="line"><span class="bullet">-</span> relentless</span><br><span class="line"><span class="bullet">    -</span> 音标：/rɪˈlentləs/</span><br><span class="line"><span class="bullet">    -</span> 中文释义：持续的，不懈的，无情的</span><br><span class="line"><span class="bullet">    -</span> 英文例句：The detective&#x27;s relentless pursuit of the truth finally led to a breakthrough in the case.</span><br><span class="line"><span class="bullet">    -</span> 例句翻译：侦探对真相的不懈追查最终使案件取得了突破</span><br><span class="line"></span><br><span class="line"><span class="section">## 注意</span></span><br><span class="line">请你在输出结果时，检查输出的格式，确保输出符合格式要求</span><br></pre></td></tr></table></figure>
<h3 id="待学词汇盘点">待学词汇盘点​</h3>
<p>这一步比较简单，就是把精读环节的“待学词汇”全部提取出来，并按照我们需要的格式整理为一份词汇盘点列表。​</p>
<p>也就是输出一系列数组数据，输出一段文本结果。所以，我们这一步不需要用到批处理，直接大模型单次处理即可。</p>
<p>提示词：</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">## 功能</span></span><br><span class="line">识别&#123;&#123;input&#125;&#125;中的待学词汇，并输出待学词汇汇总列表</span><br><span class="line"> </span><br><span class="line">待学词汇在 input 的结构是这样的，你可以这样去找到待学词汇：</span><br><span class="line"> </span><br><span class="line">[英文原文]</span><br><span class="line"> </span><br><span class="line">[中文翻译]</span><br><span class="line"> </span><br><span class="line"><span class="bullet">-</span> [待学词汇]</span><br><span class="line"><span class="bullet">    -</span> 音标：[音标]</span><br><span class="line"><span class="bullet">    -</span> 中文释义：[中文释义]</span><br><span class="line"><span class="bullet">    -</span> 英文例句：[英文例句]</span><br><span class="line"><span class="bullet">    -</span> 例句翻译：[例句翻译]</span><br><span class="line"> </span><br><span class="line"><span class="section">## 待学词汇汇总列表</span></span><br><span class="line">以下是需要输出的待学词汇汇总列表的格式：</span><br><span class="line"><span class="bullet">-</span> [待学词汇]：[音标] [中文释义]</span><br><span class="line"><span class="bullet">-</span> [待学词汇]：[音标] [中文释义]</span><br><span class="line"> </span><br><span class="line"><span class="section">## 正向示例</span></span><br><span class="line">以下符合待学词汇汇总列表的模板要求，输出的一个正向示例：</span><br><span class="line"><span class="bullet">-</span> frail：/freɪl/ 虚弱的，脆弱的</span><br><span class="line"><span class="bullet">-</span> nomination：/ˌnɒmɪˈneɪʃn/ 提名，任命</span><br><span class="line"><span class="bullet">-</span> intention：/ɪnˈtenʃn/ 意图，目的</span><br><span class="line"><span class="bullet">-</span> remainder：/rɪˈmeɪndə(r)/ 剩余部分，余数</span><br><span class="line"> </span><br><span class="line"><span class="section">## 注意</span></span><br><span class="line"><span class="bullet">-</span> 不要遗漏任何的待学词汇</span><br><span class="line"><span class="bullet">-</span> 请你在输出结果时，检查输出的格式，确保输出符合格式要求</span><br></pre></td></tr></table></figure>
<h3 id="拼合精读结果">拼合精读结果</h3>
<p>由于「全文对照精读」节点输出的是一条条的数组数据，并不是我们最终想输出的精读结果样式。所以需要把每一段精读内容再拼合成一篇文章。处理代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">main</span>(<span class="params">args: Args</span>) -&gt; Output:</span></span><br><span class="line">    readings = [item[<span class="string">&quot;Reading&quot;</span>] <span class="keyword">for</span> item <span class="keyword">in</span> args.params[<span class="string">&quot;input&quot;</span>]]</span><br><span class="line">    readingv = <span class="string">&quot;\n \n&quot;</span>.join(readings)</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&quot;readingv&quot;</span>: readingv&#125;</span><br></pre></td></tr></table></figure>
<h3 id="输出节点">输出节点​</h3>
<p>好了，恭喜，到这一步，每个子任务的节点都已经配置验证完毕，现在我们只需要把这些内容像“乐高”一样拼装起来。​</p>
<ol>
<li>因为我们需要按照固定的格式，直接生成结构化的长文，而不仅仅是返回字段数据，所以需要选择回答模式为“使用设定的内容直接回答”​</li>
<li>由于最终输出结果的呈现是在外层 bot 中，以对话的形式给出。我们的精读结果往往很长，“流式输出”能够像码字一样，逐步展示内容，有更好的使用体验。​</li>
<li>整理回答中需要使用的变量，在「输出变量」区域中全部引用​</li>
<li>根据最终输出预期，按照 Markdown 格式的写法，引用「输出变量」区域的参数名，在「回答内容」中输入回答内容模板：</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"># &#123;&#123;cnTitle&#125;&#125;</span><br><span class="line"> </span><br><span class="line">&gt; &#123;&#123;cnSummary&#125;&#125;</span><br><span class="line"> </span><br><span class="line">## 阅读理解小作业</span><br><span class="line">&#123;&#123;question&#125;&#125;</span><br><span class="line"> </span><br><span class="line">## 阅读大纲</span><br><span class="line">![](&#123;&#123;treeMindUrl&#125;&#125;)</span><br><span class="line"> </span><br><span class="line">## 原文音频</span><br><span class="line">[](&#123;&#123;voiceUrl&#125;&#125;)</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line"># 全文对照精读</span><br><span class="line">## &#123;&#123;enTitle&#125;&#125;</span><br><span class="line"> </span><br><span class="line">&#123;&#123;readingv&#125;&#125;</span><br><span class="line"> </span><br><span class="line">### 待学词汇汇总</span><br><span class="line">&#123;&#123;words&#125;&#125;</span><br><span class="line"> </span><br><span class="line">---</span><br><span class="line"> </span><br><span class="line">## 参考答案</span><br><span class="line">&#123;&#123;answer&#125;&#125;</span><br></pre></td></tr></table></figure>
<p>这些文本，在外层 bot 中，就会以 Markdown 格式完成渲染，分别区分显示标题、引用、正文、列表、图片、链接等格式。​<br>
现在，整个工作流 Agent 的核心功能，均已经被实现验证！</p>
<h1 id="step-3：全面评估并优化-agent-效果">Step 3：全面评估并优化 Agent 效果​</h1>
<p>在获得了整个搭建好的工作流后，为了验证 Agent 的效果，一般需要进行如下操作：​</p>
<ul>
<li>整体试运行 Agent，识别功能和性能的卡点​</li>
<li>通过反复测试和迭代，优化至达到预期水平<br>
​</li>
</ul>
<p>如果你还不是很了解 Coze 的操作，可以按照如下步骤教学，完成 Agent 最后的测试与封装：​</p>
<ol>
<li>试运行整个工作流，验证整体运行效果（包括响应速度、生成质量）​</li>
<li>迭代优化工作流，提升性能​</li>
<li>在外层 bot 中封装工作流​</li>
<li>外层 bot 调试​</li>
<li>万事大吉，可以发布你的 bot 啦</li>
</ol>
<h2 id="试运行整个工作流-验证整体运行效果">试运行整个工作流，验证整体运行效果​</h2>
<p>点击「试运行」，把待精读文章输入「开始节点」的<code>&#123;&#123;BOT_USER_INPUT&#125;&#125;</code>，发现整个流程在 1 分钟内运行完成，最终输出的“回答内容”也符合我们的预期。​</p>
<h2 id="迭代优化工作流-提升性能">迭代优化工作流，提升性能​</h2>
<p>此步骤不展开，有需要可以自行按照上文的配置思路，再进行细致优化（因为文章的配置方法，其实我已经优化过几次，效果比刚拼搭完的时候好多了～）​</p>
<h2 id="在外层-bot-中封装工作流">在外层 bot 中封装工作流​</h2>
<p>在点击「发布」，发布工作流后，我们就需要创建一个 bot，进行最终的工作流封装。​<br>
​​<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/2024/12/05/LLM-Learning9/9.png"><br>
封装过程如下：​</p>
<ol>
<li>创建 Bot​</li>
<li>填写 Bot 介绍​</li>
<li>切换 Bot 模式为“单 Agent（工作流模式）”：因为这个 Agent，我们只需要每次输入英文文章的时候，返回精读结果，所以不需要用外层 bot 对输入进行其他任务理解，直接调用工作流即可。​</li>
<li>把我们刚才配置好的工作流，添加到 Bot 中​</li>
<li>填写开场白，引导用户使用：附开场白文案 ⬇️</li>
<li>关闭开场白预置问题：因为使用流程里用不到，所以直接关掉。</li>
</ol>
<p>开场白文案 ：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">欢迎来到英文精读专区！我是小E，您的专业英语学习助手。👋😊</span><br><span class="line"></span><br><span class="line">🎓 作为经验丰富的英文精读专家，我为各级中国学习者提供量身定制的服务，助您快速提升英语水平。</span><br><span class="line"></span><br><span class="line">📚 我的服务包括：</span><br><span class="line"></span><br><span class="line">&gt; 🌟 中英双语文章概述</span><br><span class="line">&gt; 🧠 定制阅读理解题</span><br><span class="line">&gt; 📖 全文详细解析</span><br><span class="line">&gt; 🔍 重点词汇学习</span><br><span class="line">&gt; 🗝️ 参考答案解析</span><br><span class="line"> </span><br><span class="line">🖋️ 请按以下格式输入文章：</span><br><span class="line"></span><br><span class="line">&#96;&#96;&#96;Markdown </span><br><span class="line"># [原文标题]</span><br><span class="line"></span><br><span class="line">[原文内容]</span><br><span class="line">&#x2F;&#96;&#96;&#96;</span><br><span class="line"></span><br><span class="line">让我们一起开启精彩的英语学习之旅吧！🚀</span><br></pre></td></tr></table></figure>
<h2 id="外层-bot-调试">外层 bot 调试​</h2>
<p>完成封装后，即可在「预览与调试」区进行最终体验与调试。—如果一切正常，你就能获得这样的成功结果，yes～​</p>
<h2 id="发布你的-bot">发布你的 bot</h2>
<p>最后，点击「发布」，按照页面引导，一路确认，把你的 Bot 发布上架吧～</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Die Hu</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://enchantedovo.cn/2024/12/05/LLM-Learning9/">https://enchantedovo.cn/2024/12/05/LLM-Learning9/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://enchantedovo.cn" target="_blank">Enchanted to Meet U</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%A4%A7%E6%A8%A1%E5%9E%8B/">大模型</a><a class="post-meta__tags" href="/tags/Agent/">Agent</a></div><div class="post_share"><div class="social-share" data-image="https://s3.bmp.ovh/imgs/2024/04/08/2368e73f30658fe8.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/2024/12/05/LLM-Learning8/"><img class="next-cover" data-lazy-src="https://s3.bmp.ovh/imgs/2024/04/08/2368e73f30658fe8.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">如何着手写prompt</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2024/07/19/LLM-Learning3/" title="论文阅读记录 —— LLM Agent"><img class="cover" data-lazy-src="https://s3.bmp.ovh/imgs/2024/04/08/2368e73f30658fe8.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-07-19</div><div class="title">论文阅读记录 —— LLM Agent</div></div></a></div><div><a href="/2024/11/14/LLM-Learning6/" title="论文阅读笔记 - Web Agent"><img class="cover" data-lazy-src="https://s3.bmp.ovh/imgs/2024/04/08/2368e73f30658fe8.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-11-14</div><div class="title">论文阅读笔记 - Web Agent</div></div></a></div><div><a href="/2024/04/08/LLM-Learning1/" title="RAG 应知必会"><img class="cover" data-lazy-src="https://s3.bmp.ovh/imgs/2024/04/08/2368e73f30658fe8.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-04-08</div><div class="title">RAG 应知必会</div></div></a></div><div><a href="/2024/04/10/LLM-Learning2/" title="RAG开发的痛点以及解决方案"><img class="cover" data-lazy-src="https://s3.bmp.ovh/imgs/2024/04/08/2368e73f30658fe8.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-04-10</div><div class="title">RAG开发的痛点以及解决方案</div></div></a></div><div><a href="/2024/07/20/LLM-Learning4/" title="论文阅读记录 —— LLM 相关"><img class="cover" data-lazy-src="https://s3.bmp.ovh/imgs/2024/04/08/2368e73f30658fe8.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-07-20</div><div class="title">论文阅读记录 —— LLM 相关</div></div></a></div><div><a href="/2024/10/17/LLM-Learning5/" title="TrafficLLM 复现 - Evaluation & Server"><img class="cover" data-lazy-src="https://s3.bmp.ovh/imgs/2024/04/08/2368e73f30658fe8.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-10-17</div><div class="title">TrafficLLM 复现 - Evaluation & Server</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" data-lazy-src="/img/ava.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">Die Hu</div><div class="author-info__description">———— 🦋的个人小站</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">36</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">32</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">21</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Enchantedovo" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:hudie@iie.ac.cn" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">Welcome to My Blog ❤</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BC%95%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">引言​</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#step-0%EF%BC%9A%E6%A2%B3%E7%90%86%E6%89%8B%E6%8D%8F-ai-agent-%E7%9A%84%E6%80%9D%E8%B7%AF"><span class="toc-number">2.</span> <span class="toc-text">Step 0：梳理手捏  AI Agent 的思路​</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#step-1%EF%BC%9A%E5%88%B6%E5%AE%9A%E4%BB%BB%E5%8A%A1%E7%9A%84%E5%85%B3%E9%94%AE%E6%96%B9%E6%B3%95"><span class="toc-number">3.</span> <span class="toc-text">Step 1：制定任务的关键方法​</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93%E4%BB%BB%E5%8A%A1%E7%9B%AE%E6%A0%87%E4%B8%8E%E6%89%A7%E8%A1%8C%E5%BD%A2%E5%BC%8F"><span class="toc-number">3.1.</span> <span class="toc-text">总结任务目标与执行形式​</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E8%A7%A3%E5%AD%90%E4%BB%BB%E5%8A%A1-%E7%A1%AE%E7%AB%8B%E9%80%BB%E8%BE%91%E9%A1%BA%E5%BA%8F%E5%92%8C%E4%BE%9D%E8%B5%96%E5%85%B3%E7%B3%BB"><span class="toc-number">3.2.</span> <span class="toc-text">分解子任务，确立逻辑顺序和依赖关系​</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE%E8%AE%A1%E6%AF%8F%E4%B8%AA%E5%AD%90%E4%BB%BB%E5%8A%A1%E7%9A%84%E6%89%A7%E8%A1%8C%E6%96%B9%E6%B3%95"><span class="toc-number">3.3.</span> <span class="toc-text">设计每个子任务的执行方法​</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#step-2%EF%BC%9A%E5%88%86%E6%AD%A5%E6%9E%84%E5%BB%BA%E5%92%8C%E6%B5%8B%E8%AF%95-agent-%E5%8A%9F%E8%83%BD"><span class="toc-number">4.</span> <span class="toc-text">Step 2：分步构建和测试 Agent 功能​</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%A8-coze-%E4%B8%8A%E6%90%AD%E5%BB%BA%E5%B7%A5%E4%BD%9C%E6%B5%81%E6%A1%86%E6%9E%B6-%E8%AE%BE%E5%AE%9A%E6%AF%8F%E4%B8%AA%E8%8A%82%E7%82%B9%E7%9A%84%E9%80%BB%E8%BE%91%E5%85%B3%E7%B3%BB"><span class="toc-number">4.1.</span> <span class="toc-text">在 Coze 上搭建工作流框架，设定每个节点的逻辑关系​</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%A6%E7%BB%86%E9%85%8D%E7%BD%AE%E5%AD%90%E4%BB%BB%E5%8A%A1%E8%8A%82%E7%82%B9-%E5%B9%B6%E9%AA%8C%E8%AF%81%E6%AF%8F%E4%B8%AA%E5%AD%90%E4%BB%BB%E5%8A%A1%E7%9A%84%E5%8F%AF%E7%94%A8%E6%80%A7"><span class="toc-number">4.2.</span> <span class="toc-text">详细配置子任务节点，并验证每个子任务的可用性​</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%87%E9%A2%98-%E5%AF%BC%E8%AF%AD-%E5%A4%A7%E7%BA%B2-%E5%90%AB%E5%A4%A7%E6%A8%A1%E5%9E%8B%E8%8A%82%E7%82%B9%E7%9A%84%E9%85%8D%E7%BD%AE%E6%80%9D%E8%B7%AF"><span class="toc-number">4.2.1.</span> <span class="toc-text">标题、导语、大纲（含大模型节点的配置思路）​</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%98%85%E8%AF%BB%E5%AF%BC%E5%9B%BE-%E5%90%AB%E6%8F%92%E4%BB%B6%E8%8A%82%E7%82%B9%E7%9A%84%E9%85%8D%E7%BD%AE%E6%80%9D%E8%B7%AF"><span class="toc-number">4.2.2.</span> <span class="toc-text">阅读导图（含插件节点的配置思路）​</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%98%85%E8%AF%BB%E7%90%86%E8%A7%A3%E5%B0%8F%E4%BD%9C%E4%B8%9A"><span class="toc-number">4.2.3.</span> <span class="toc-text">阅读理解小作业​</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E7%AD%94%E6%A1%88"><span class="toc-number">4.2.4.</span> <span class="toc-text">参考答案​</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8B%B1%E6%96%87%E9%9F%B3%E9%A2%91"><span class="toc-number">4.2.5.</span> <span class="toc-text">英文音频​</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E6%AE%B5%E8%BE%93%E5%85%A5%E6%AD%A3%E6%96%87"><span class="toc-number">4.2.6.</span> <span class="toc-text">分段输入正文</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A8%E6%96%87%E5%AF%B9%E7%85%A7%E7%B2%BE%E8%AF%BB-%E5%90%AB%E6%89%B9%E5%A4%84%E7%90%86%E7%9A%84%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E8%AE%BE%E7%BD%AE%E6%8A%80%E5%B7%A7"><span class="toc-number">4.2.7.</span> <span class="toc-text">全文对照精读（含批处理的输入输出设置技巧）​</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BE%85%E5%AD%A6%E8%AF%8D%E6%B1%87%E7%9B%98%E7%82%B9"><span class="toc-number">4.2.8.</span> <span class="toc-text">待学词汇盘点​</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8B%BC%E5%90%88%E7%B2%BE%E8%AF%BB%E7%BB%93%E6%9E%9C"><span class="toc-number">4.2.9.</span> <span class="toc-text">拼合精读结果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BE%93%E5%87%BA%E8%8A%82%E7%82%B9"><span class="toc-number">4.2.10.</span> <span class="toc-text">输出节点​</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#step-3%EF%BC%9A%E5%85%A8%E9%9D%A2%E8%AF%84%E4%BC%B0%E5%B9%B6%E4%BC%98%E5%8C%96-agent-%E6%95%88%E6%9E%9C"><span class="toc-number">5.</span> <span class="toc-text">Step 3：全面评估并优化 Agent 效果​</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%95%E8%BF%90%E8%A1%8C%E6%95%B4%E4%B8%AA%E5%B7%A5%E4%BD%9C%E6%B5%81-%E9%AA%8C%E8%AF%81%E6%95%B4%E4%BD%93%E8%BF%90%E8%A1%8C%E6%95%88%E6%9E%9C"><span class="toc-number">5.1.</span> <span class="toc-text">试运行整个工作流，验证整体运行效果​</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%AD%E4%BB%A3%E4%BC%98%E5%8C%96%E5%B7%A5%E4%BD%9C%E6%B5%81-%E6%8F%90%E5%8D%87%E6%80%A7%E8%83%BD"><span class="toc-number">5.2.</span> <span class="toc-text">迭代优化工作流，提升性能​</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%A8%E5%A4%96%E5%B1%82-bot-%E4%B8%AD%E5%B0%81%E8%A3%85%E5%B7%A5%E4%BD%9C%E6%B5%81"><span class="toc-number">5.3.</span> <span class="toc-text">在外层 bot 中封装工作流​</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%96%E5%B1%82-bot-%E8%B0%83%E8%AF%95"><span class="toc-number">5.4.</span> <span class="toc-text">外层 bot 调试​</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%91%E5%B8%83%E4%BD%A0%E7%9A%84-bot"><span class="toc-number">5.5.</span> <span class="toc-text">发布你的 bot</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/12/05/LLM-Learning9/" title="低代码智能体框架Coze案例"><img data-lazy-src="https://s3.bmp.ovh/imgs/2024/04/08/2368e73f30658fe8.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="低代码智能体框架Coze案例"/></a><div class="content"><a class="title" href="/2024/12/05/LLM-Learning9/" title="低代码智能体框架Coze案例">低代码智能体框架Coze案例</a><time datetime="2024-12-05T03:05:00.000Z" title="发表于 2024-12-05 11:05:00">2024-12-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/12/05/LLM-Learning8/" title="如何着手写prompt"><img data-lazy-src="https://s3.bmp.ovh/imgs/2024/04/08/2368e73f30658fe8.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="如何着手写prompt"/></a><div class="content"><a class="title" href="/2024/12/05/LLM-Learning8/" title="如何着手写prompt">如何着手写prompt</a><time datetime="2024-12-05T02:12:45.000Z" title="发表于 2024-12-05 10:12:45">2024-12-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/11/26/LLM-Learning7/" title="OpenAI官方的Prompt工程指南"><img data-lazy-src="https://s3.bmp.ovh/imgs/2024/04/08/2368e73f30658fe8.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="OpenAI官方的Prompt工程指南"/></a><div class="content"><a class="title" href="/2024/11/26/LLM-Learning7/" title="OpenAI官方的Prompt工程指南">OpenAI官方的Prompt工程指南</a><time datetime="2024-11-26T07:44:30.000Z" title="发表于 2024-11-26 15:44:30">2024-11-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/11/14/LLM-Learning6/" title="论文阅读笔记 - Web Agent"><img data-lazy-src="https://s3.bmp.ovh/imgs/2024/04/08/2368e73f30658fe8.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="论文阅读笔记 - Web Agent"/></a><div class="content"><a class="title" href="/2024/11/14/LLM-Learning6/" title="论文阅读笔记 - Web Agent">论文阅读笔记 - Web Agent</a><time datetime="2024-11-14T03:21:31.000Z" title="发表于 2024-11-14 11:21:31">2024-11-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/11/14/LLM-Security4/" title="LLM for Security 论文记录 1114"><img data-lazy-src="https://s3.bmp.ovh/imgs/2024/04/08/2368e73f30658fe8.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="LLM for Security 论文记录 1114"/></a><div class="content"><a class="title" href="/2024/11/14/LLM-Security4/" title="LLM for Security 论文记录 1114">LLM for Security 论文记录 1114</a><time datetime="2024-11-14T02:57:54.000Z" title="发表于 2024-11-14 10:57:54">2024-11-14</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By Die Hu</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">❤Hi, welcome to my blog!❤</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font-plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    let initData = {
      el: '#vcomment',
      appId: 'idIIOSAeq1UbVzvHKh7NdbXC-gzGzoHsz',
      appKey: 'Ozg70h4ULc79NSqitNLUL3vP',
      placeholder: 'Please leave your footprints',
      avatar: 'monsterid',
      meta: 'nick,mail,link'.split(','),
      pageSize: '10',
      lang: 'zh-CN',
      recordIP: false,
      serverURLs: '',
      emojiCDN: '',
      emojiMaps: "",
      enableQQ: false,
      path: window.location.pathname,
    }

    if (true) { 
      initData.requiredFields= ('nick,mail'.split(','))
    }
    
    if (false) {
      const otherData = false
      initData = Object.assign(initData, otherData)
    }
    
    const valine = new Valine(initData)
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !true) {
  if (true) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-heart.min.js" async="async" mobile="false"></script></div></body></html>