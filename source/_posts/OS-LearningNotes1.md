---
title: 操作系统高级教程课堂笔记1
date: 2022-08-30 15:05:26
tags: 
  - 操作系统
  - Linux Kernel
  - 特权级
  - 授权
categories: 操作系统高级教程课堂笔记
description: 国科大杨力祥《操作系统高级教程》课堂笔记1 —— 为什么需要内核
cover: https://s3.bmp.ovh/imgs/2022/08/30/57e6003529c041b7.webp
---

> - 源码阅读工具：Source Insight
> - 关键字:
>     - 内核Kernel
>     - 特权级
>     - 授权
> - 主要内容：本节课主要探讨了Linux内核，老师从逻辑推理的角度带大家体会什么是内核，为什么需要内核。

# 授权

## 授权的概念

**<u>未经授权，不得访问其他用户的资源。</u>**

## 探讨

### 问题一：未经许可，用户是否能访问外设（IO）中自己的资源？
- 答案：不可以。
- 原因：IO物理端口只有一个，而用户程序具有不确定性（可能会做一些坏事），如果开放端口，可能会无法控制。
- 解决办法：若用户非要访问（IO指令/MMIO），则用特权级拦住。
    - 特权级：CPU剥夺了应用程序访问外设的能力。

### 问题二：而自己的资源，应该要能访问的，那怎么办？
- 用户进程是不确定的，并且它应该是不确定的，没有理由要求它确定。
- 由**一组确定的代码**来访问自己的资源————**<u>内核</u>**。

# 特权级

## 特权级的概念

在linux系统中特权级别分为0，1，2，3一共四个级别，0最大 ，3最小。
- 一般内核代码运行在0特权级；
- 驱动、虚拟机等运行在1，2特权级；
- 而我们自己写的程序一般运行在3特权级，也就是最低级别。

## 探讨
### 用户程序指令（（3特权））为什么不能访问0特权的数据？
- 答：因为用户程序指令具有不确定性。

### 0特权能否直接跳到3特权？
- 答：不允许，若此时0特权跳转过去后仍保持全态，那么应用程序就会直接变为kernel。